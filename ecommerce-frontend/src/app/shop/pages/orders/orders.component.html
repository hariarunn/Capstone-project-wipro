<section class="max-w-7xl mx-auto px-4 py-8 animate-fade-in">
  <h1 class="text-2xl font-bold mb-4">Your Orders</h1>

  <div class="space-y-4" *ngIf="(orders$ | async) as orders">
    <div *ngIf="!orders.length" class="card-base p-8 text-center">
      <div class="text-xl font-semibold mb-1">No orders yet</div>
      <p class="subtle mb-4">Place your first order to see it here.</p>
      <a routerLink="/catalog" class="btn-primary hover-pop">Start shopping</a>
    </div>

    <div class="card-base p-4" *ngFor="let o of orders">
      <div class="flex flex-wrap items-center justify-between gap-3">
        <div class="font-semibold">Order #{{ o.id }}</div>
        <div class="subtle">Placed {{ o.placedAt | date:'medium' }}</div>
        <div class="ml-auto">
          <span class="chip">{{ o.status }}</span>
        </div>
      </div>

      <!-- timeline -->
      <div class="timeline mt-3">
        <div class="step" [class.done]="progressIdx(o.status) >= 0"><span>Created</span></div>
        <div class="step" [class.done]="progressIdx(o.status) >= 1"><span>Paid</span></div>
        <div class="step" [class.done]="progressIdx(o.status) >= 2"><span>Dispatched</span></div>
        <div class="step" [class.done]="progressIdx(o.status) >= 3"><span>Delivered</span></div>
      </div>

      <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="space-y-2">
          <div class="flex items-center gap-3" *ngFor="let i of o.items | slice:0:4">
            <img [src]="i.imageUrl" class="w-12 h-12 rounded-lg object-cover border border-neutral-200 dark:border-neutral-800" />
            <div class="flex-1 text-sm leading-tight line-clamp-2">{{ i.title }}</div>
            <div class="text-sm font-medium">× {{ i.qty }}</div>
          </div>
          <div class="subtle" *ngIf="o.items.length > 4">+ {{ o.items.length - 4 }} more item(s)</div>
        </div>
        <div class="text-right">
          <div class="text-lg font-semibold">₹{{ o.totals.total | number }}</div>
          <div class="subtle">including tax & shipping</div>
        </div>
      </div>
    </div>
  </div>
</section>
